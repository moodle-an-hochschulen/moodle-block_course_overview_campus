define(["jquery"],function(a){"use strict";function b(b){void 0!==b&&b.preventDefault();var c=a("#coc-filterterm").val();"all"===c?a(".termdiv").removeClass("coc-hidden"):(a(".termdiv").addClass("coc-hidden"),a(".coc-term-"+c).removeClass("coc-hidden")),M.util.set_user_preference("block_course_overview_campus-selectedterm",c)}function c(b){void 0!==b&&b.preventDefault();var c=a("#coc-filterteacher").val();"all"===c?a(".teacherdiv").removeClass("coc-hidden"):(a(".teacherdiv").addClass("coc-hidden"),a(".coc-teacher-"+c).removeClass("coc-hidden")),M.util.set_user_preference("block_course_overview_campus-selectedteacher",c)}function d(b){void 0!==b&&b.preventDefault();var c=a("#coc-filtercategory").val();"all"===c?a(".categorydiv").removeClass("coc-hidden"):(a(".categorydiv").addClass("coc-hidden"),a(".coc-category-"+c).removeClass("coc-hidden")),M.util.set_user_preference("block_course_overview_campus-selectedcategory",c)}function e(b){void 0!==b&&b.preventDefault();var c=a("#coc-filtertoplevelcategory").val();"all"===c?a(".toplevelcategorydiv").removeClass("coc-hidden"):(a(".toplevelcategorydiv").addClass("coc-hidden"),a(".coc-toplevelcategory-"+c).removeClass("coc-hidden")),M.util.set_user_preference("block_course_overview_campus-selectedtoplevelcategory",c)}function f(f){var g,h,i,j;for(g in f)if(f.hasOwnProperty(g)&&(h=f[g],i=a("#coc-filter"+g),i.length&&(j=i.val(),j!==h)))switch(g){case"term":b();break;case"teacher":c();break;case"category":d();break;case"toplevelcategory":e()}}function g(){var b=new Array;a(".coc-course").each(function(c,d){0==a(d).height()&&b.push(d.id.slice(11))});var c=JSON.stringify(b);M.util.set_user_preference("local_boostcoc-notshowncourses",c)}function h(){var b=new Array;a("#coc-filterterm, #coc-filtercategory, #coc-filtertoplevelcategory, #coc-filterteacher").each(function(c,d){"all"!==a(d).val()&&b.push(d.id.slice(4))});var c=parseInt(a("#coc-hiddencoursescount").html(),10);c>0&&b.push("hidecourses");var d=JSON.stringify(b);M.util.set_user_preference("local_boostcoc-activefilters",d)}return{initFilter:function(i){a("#coc-filterterm").on("change",b),a("#coc-filterteacher").on("change",c),a("#coc-filtercategory").on("change",d),a("#coc-filtertoplevelcategory").on("change",e),1==i.local_boostcoc&&a("#coc-filterterm, #coc-filterteacher, #coc-filtercategory, #coc-filtertoplevelcategory").on("change",g).on("change",h),f(i.initialsettings)}}});